"use strict";(self.webpackChunkFlox=self.webpackChunkFlox||[]).push([[54],{6054:(e,t,a)=>{a.r(t),a.d(t,{default:()=>p});var n=a(2167),r=a(2244),i=a(5274),s=a(6607),o=a.n(s),c=a(7484),h=a.n(c),u=a(629),l=a(3046);function d(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function f(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?d(Object(a),!0).forEach((function(t){(0,n.Z)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):d(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}h().extend(o());const m={mixins:[l.Z],data:function(){return{showDate:new Date,items:[],filteredItems:[]}},computed:f(f({},(0,u.rn)({loading:function(e){return e.loading}})),{},{keymap:function(){return{left:this.navigateViaKey,right:this.navigateViaKey}}}),created:function(){var e=this;this.setPageTitle(this.lang("calendar")),this.SET_LOADING(!0),this.checkForDate(),(0,i.default)("".concat(config.api,"/calendar")).then((function(t){e.items=t.data,e.SET_LOADING(!1),e.removeItemsOutsideOfMonth()}))},watch:{$route:function(){this.checkForDate(),this.removeItemsOutsideOfMonth()}},methods:f(f(f({},(0,u.OI)(["SET_LOADING"])),(0,u.nv)(["setPageTitle"])),{},{removeItemsOutsideOfMonth:function(){var e=h()(this.showDate),t=e.startOf("month"),a=e.endOf("month");this.filteredItems=this.items.filter((function(e){return h()(e.startDate).isBetween(t,a)}))},navigateViaKey:function(e){var t=e.keyCode,a=h()(this.showDate);switch(t){case 37:return this.setShowDate(a.subtract(1,"month"));case 39:return this.setShowDate(a.add(1,"month"))}},checkForDate:function(){var e=this.$route.query.date;this.showDate=e?h()(e).toDate():new Date},setShowDate:function(e){e=h()(e).format("YYYY-MM-DD"),this.showDate=e,this.$router.push({name:"calendar",query:{date:e}}),this.removeItemsOutsideOfMonth()},navigateToItem:function(e){var t=e.originalItem,a=t.tmdb_id,n=t.type;this.$router.push("/".concat(n,"/").concat(a))}}),components:{CalendarView:r.CalendarView,CalendarViewHeader:r.CalendarViewHeader}};const p=(0,a(1900).Z)(m,(function(){var e=this,t=e._self._c;return t("main",{directives:[{name:"hotkey",rawName:"v-hotkey",value:e.keymap,expression:"keymap"}],staticClass:"calendar-main no-select"},[t("transition",{attrs:{mode:"out-in",name:"fade"}},[e.loading?e._e():t("div",{staticClass:"wrap-content calendar-wrap"},[t("calendar-view",{staticClass:"theme-default",attrs:{"show-date":e.showDate,items:e.filteredItems,"starting-day-of-week":1},on:{"click-item":e.navigateToItem},scopedSlots:e._u([{key:"header",fn:function(a){return t("calendar-view-header",{attrs:{title:"You can also use the arrow keys","header-props":a.headerProps},on:{input:e.setShowDate}})}}],null,!1,1279158005)})],1)]),e._v(" "),e.loading?t("span",{staticClass:"loader fullsize-loader"},[t("i")]):e._e()],1)}),[],!1,null,null,null).exports}}]);