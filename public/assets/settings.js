"use strict";(self.webpackChunkFlox=self.webpackChunkFlox||[]).push([[568],{3136:(e,t,n)=>{n.r(t),n.d(t,{default:()=>K});var s=n(3932),r=n(9800),i=n(8416),a=n(2568),c=n(6068),o=n.n(c);function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){(0,s.c)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const p={mixins:[a.c],props:["user"],created:function(){this.clearSuccessMessage=o()(this.clearSuccessMessage,2e3)},data:function(){return{config:window.config,error:!1,password:"",success:!1}},computed:u(u({},(0,i.ys)({loading:function(e){return e.loading}})),{},{passwordMinLength:function(){return this.user.password_min_length||4}}),methods:{editUser:function(){var e=this,t=this.password;r.default.patch("".concat(config.api,"/userdata"),{password:t}).then((function(){e.success=!0,e.error=!1,e.clearSuccessMessage()})).catch((function(t){e.error=t.response.data.message}))},clearSuccessMessage:function(){this.success=!1}}};var d=n(1456);const f=(0,d.c)(p,(function(){var e=this,t=e._self._c;return e.loading?e._e():t("div",{staticClass:"settings-box"},["demo"===e.config.env?t("div",{staticClass:"login-error"},[t("span",[e._v("Data cannot be changed in the demo")])]):e._e(),e._v(" "),t("form",{staticClass:"settings-form",on:{submit:function(t){return t.preventDefault(),e.editUser()}}},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],attrs:{type:"password",placeholder:e.lang("password"),minlength:e.passwordMinLength,autocomplete:"off",required:""},domProps:{value:e.password},on:{input:function(t){t.target.composing||(e.password=t.target.value)}}}),e._v(" "),e.success?t("div",{staticClass:"userdata-changed"},[e._v(e._s(e.lang("success message")))]):e._e(),e._v(" "),e.error?t("div",{staticClass:"userdata-changed userdata-changed--error"},[e._v(e._s(e.error))]):e._e(),e._v(" "),t("input",{attrs:{type:"submit"},domProps:{value:e.lang("save button")}})])])}),[],!1,null,null,null).exports;function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(Object(n),!0).forEach((function(t){(0,s.c)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const h={mixins:[a.c],props:["user"],created:function(){this.setOptionsFromUser(this.user)},data:function(){return{config:window.config,genre:null,date:null,spoiler:null,watchlist:null,ratings:null}},computed:v({},(0,i.ys)({loading:function(e){return e.loading}})),methods:v(v({},(0,i.sR)(["SET_LOADING"])),{},{setOptionsFromUser:function(e){this.genre=e.genre,this.date=e.date,this.spoiler=e.spoiler,this.watchlist=e.watchlist,this.ratings=e.ratings},updateOptions:function(){var e=this;this.SET_LOADING(!0);var t=this.date,n=this.genre,s=this.ratings,i=this.spoiler,a=this.watchlist;r.default.patch("".concat(config.api,"/settings"),{date:t,genre:n,spoiler:i,watchlist:a,ratings:s}).then((function(t){e.SET_LOADING(!1)}),(function(e){alert(e.message)}))}})};const _=(0,d.c)(h,(function(){var e=this,t=e._self._c;return e.loading?e._e():t("div",{staticClass:"settings-box element-ui-checkbox no-select"},["demo"===e.config.env?t("div",{staticClass:"login-error"},[t("span",[e._v("Data cannot be changed in the demo")])]):e._e(),e._v(" "),t("div",{staticClass:"setting-box"},[t("el-checkbox",{on:{change:e.updateOptions},model:{value:e.genre,callback:function(t){e.genre=t},expression:"genre"}},[e._v(e._s(e.lang("display genre")))])],1),e._v(" "),t("div",{staticClass:"setting-box"},[t("el-checkbox",{on:{change:e.updateOptions},model:{value:e.date,callback:function(t){e.date=t},expression:"date"}},[e._v(e._s(e.lang("display date")))])],1),e._v(" "),t("div",{staticClass:"setting-box"},[t("el-checkbox",{on:{change:e.updateOptions},model:{value:e.spoiler,callback:function(t){e.spoiler=t},expression:"spoiler"}},[e._v(e._s(e.lang("spoiler")))])],1),e._v(" "),t("div",{staticClass:"setting-box"},[t("el-checkbox",{on:{change:e.updateOptions},model:{value:e.watchlist,callback:function(t){e.watchlist=t},expression:"watchlist"}},[e._v(e._s(e.lang("show watchlist")))])],1),e._v(" "),t("div",{staticClass:"setting-box select-box"},[t("label",{attrs:{for:"ratings"}},[e._v(e._s(e.lang("show own ratings")))]),e._v(" "),t("select",{directives:[{name:"model",rawName:"v-model",value:e.ratings,expression:"ratings"}],attrs:{id:"ratings"},on:{change:[function(t){var n=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.ratings=t.target.multiple?n:n[0]},e.updateOptions]}},[t("option",{attrs:{value:"always"}},[e._v(e._s(e.lang("always")))]),e._v(" "),t("option",{attrs:{value:"hover"}},[e._v(e._s(e.lang("on hover")))]),e._v(" "),t("option",{attrs:{value:"never"}},[e._v(e._s(e.lang("never")))])])])])}),[],!1,null,null,null).exports;function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(Object(n),!0).forEach((function(t){(0,s.c)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const O={mixins:[a.c],data:function(){return{config:window.config,uploadSuccess:!1,uploadedFile:null}},computed:m(m({},(0,i.ys)({loading:function(e){return e.loading}})),{},{exportLink:function(){return config.api+"/export"}}),methods:m(m({},(0,i.sR)(["SET_LOADING"])),{},{upload:function(e){var t=e.target.files||e.dataTransfer.files;this.uploadedFile=new FormData,this.uploadedFile.append("import",t[0])},importMovies:function(){var e=this;this.uploadedFile&&(window.confirm(this.lang("import warn"))&&(this.SET_LOADING(!0),r.default.post("".concat(config.api,"/import"),this.uploadedFile).then((function(){e.SET_LOADING(!1),e.uploadSuccess=!0}),(function(t){e.SET_LOADING(!1),alert("Error: "+t.response.data)}))))}})};const y=(0,d.c)(O,(function(){var e=this,t=e._self._c;return e.loading?e._e():t("div",{staticClass:"settings-box"},["demo"===e.config.env?t("div",{staticClass:"login-error"},[t("span",[e._v("Data cannot be changed in the demo")])]):e._e(),e._v(" "),t("a",{staticClass:"setting-btn",attrs:{href:e.exportLink}},[e._v(e._s(e.lang("export button")))]),e._v(" "),t("form",{staticClass:"settings-form",on:{submit:function(t){return t.preventDefault(),e.importMovies()}}},[t("span",{staticClass:"import-info"},[e._v(e._s(e.lang("or divider")))]),e._v(" "),t("input",{staticClass:"file-btn",attrs:{type:"file",required:""},on:{change:e.upload}}),e._v(" "),e.uploadSuccess?t("div",{staticClass:"userdata-changed"},[e._v(e._s(e.lang("success import")))]):e._e(),e._v(" "),t("input",{attrs:{type:"submit"},domProps:{value:e.lang("import button")}})])])}),[],!1,null,null,null).exports;function w(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}function j(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?w(Object(n),!0).forEach((function(t){(0,s.c)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):w(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const k={mixins:[a.c],created:function(){this.checkUpdate(),this.fetchVersion()},data:function(){return{version:"",isUpdate:null}},computed:j(j({},(0,i.ys)({loading:function(e){return e.loading}})),{},{updateMessage:function(){return!1===this.isUpdate?this.lang("no update"):this.lang("checking update")}}),methods:j(j({},(0,i.sR)(["SET_LOADING"])),{},{fetchFiles:function(){var e=this;this.SET_LOADING(!0),r.default.post("".concat(config.api,"/fetch-files")).then((function(){e.SET_LOADING(!1)})).catch((function(t){e.SET_LOADING(!1),alert(t.response.data)}))},checkUpdate:function(){var e=this;(0,r.default)("".concat(config.api,"/check-update")).then((function(t){e.isUpdate=t.data}))},fetchVersion:function(){var e=this;this.SET_LOADING(!0),(0,r.default)("".concat(config.api,"/version")).then((function(t){e.SET_LOADING(!1),e.version=t.data.version}))}})};const P=(0,d.c)(k,(function(){var e=this,t=e._self._c;return e.loading?e._e():t("div",{staticClass:"settings-box"},[t("div",{staticClass:"version-wrap"},[t("span",{staticClass:"current-version"},[e._v(e._s(e.lang("current version"))+" "),t("span",[e._v(e._s(e.version))])]),e._v(" "),e.isUpdate?e._e():t("span",{staticClass:"update-check"},[e._v(e._s(e.updateMessage))]),e._v(" "),e.isUpdate?t("span",{staticClass:"update-check"},[t("a",{staticClass:"new-update",attrs:{href:"https://github.com/devfake/flox/releases",target:"_blank"}},[e._v(e._s(e.lang("new update")))])]):e._e(),e._v(" "),t("span",{staticClass:"update-check"},[e._v(e._s(e.lang("feedback"))+" "),t("a",{attrs:{href:"https://github.com/devfake/flox/issues",target:"_blank"}},[e._v("GitHub")])])])])}),[],!1,null,null,null).exports;function D(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}function x(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?D(Object(n),!0).forEach((function(t){(0,s.c)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):D(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const S={mixins:[a.c],props:["initial-refresh"],data:function(){return{config:window.config,refresh:this.initialRefresh||!1,refreshAllClicked:!1,showRefreshAllMessage:!1}},computed:x({},(0,i.ys)({loading:function(e){return e.loading}})),methods:x(x({},(0,i.sR)(["SET_LOADING"])),{},{updateRefresh:function(){var e=this;this.SET_LOADING(!0),r.default.patch("".concat(config.api,"/settings/refresh"),{refresh:this.refresh}).then((function(){e.SET_LOADING(!1)}),(function(e){alert(e.message)}))},refreshAll:function(){var e=this;this.refreshAllClicked=!0,r.default.patch("".concat(config.api,"/refresh-all")).then((function(){e.showRefreshAllMessage=!0})).catch((function(t){e.refreshAllClicked=!1,alert(t.response.data)}))}})};const A=(0,d.c)(S,(function(){var e=this,t=e._self._c;return e.loading?e._e():t("div",{staticClass:"settings-box element-ui-checkbox no-select"},["demo"===e.config.env?t("div",{staticClass:"login-error"},[t("span",[e._v("Data cannot be changed in the demo")])]):e._e(),e._v(" "),t("div",{staticClass:"setting-box"},[t("el-checkbox",{on:{change:e.updateRefresh},model:{value:e.refresh,callback:function(t){e.refresh=t},expression:"refresh"}},[e._v(e._s(e.lang("refresh automatically")))])],1),e._v(" "),t("div",{staticClass:"misc-btn-wrap"},[t("button",{directives:[{name:"show",rawName:"v-show",value:!e.refreshAllClicked,expression:" ! refreshAllClicked"}],staticClass:"setting-btn",on:{click:function(t){return e.refreshAll()}}},[e._v(e._s(e.lang("refresh all infos")))]),e._v(" "),t("span",{directives:[{name:"show",rawName:"v-show",value:e.showRefreshAllMessage,expression:"showRefreshAllMessage"}],staticClass:"update-check"},[e._v(e._s(e.lang("refresh all triggered")))])])])}),[],!1,null,null,null).exports;function T(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}function C(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?T(Object(n),!0).forEach((function(t){(0,s.c)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):T(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const E={mixins:[a.c],props:["user"],created:function(){this.setOptionsFromUser(this.user),this.clearSuccessMessage=o()(this.clearSuccessMessage,2e3)},data:function(){return{config:window.config,reminders_send_to:"",success:!1,daily:!1,weekly:!1}},computed:C({},(0,i.ys)({loading:function(e){return e.loading}})),methods:C(C({},(0,i.sR)(["SET_LOADING"])),{},{setOptionsFromUser:function(e){this.reminders_send_to=e.reminders_send_to,this.daily=e.daily,this.weekly=e.weekly},editSetting:function(){var e=this;r.default.patch("".concat(config.api,"/settings/reminders-send-to"),{reminders_send_to:this.reminders_send_to}).then((function(){e.success=!0,e.clearSuccessMessage()}))},updateReminders:function(){var e=this;this.SET_LOADING(!0);var t=this.daily,n=this.weekly;r.default.patch("".concat(config.api,"/settings/reminder-options"),{daily:t,weekly:n}).then((function(){e.SET_LOADING(!1)}),(function(e){alert(e.message)}))},clearSuccessMessage:function(){this.success=!1}})};const N=(0,d.c)(E,(function(){var e=this,t=e._self._c;return e.loading?e._e():t("div",{staticClass:"settings-box element-ui-checkbox no-select"},["demo"===e.config.env?t("div",{staticClass:"login-error"},[t("span",[e._v("Data cannot be changed in the demo")])]):e._e(),e._v(" "),t("form",{staticClass:"settings-form",on:{submit:function(t){return t.preventDefault(),e.editSetting()}}},[t("span",{staticClass:"update-check"},[e._v(e._s(e.lang("reminders send to")))]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.reminders_send_to,expression:"reminders_send_to"}],attrs:{type:"email",placeholder:"E-Mail"},domProps:{value:e.reminders_send_to},on:{input:function(t){t.target.composing||(e.reminders_send_to=t.target.value)}}}),e._v(" "),e.success?t("div",{staticClass:"userdata-changed"},[e._v(e._s(e.lang("success message")))]):e._e(),e._v(" "),t("input",{attrs:{type:"submit"},domProps:{value:e.lang("save button")}})]),e._v(" "),t("div",{staticClass:"setting-box"},[t("el-checkbox",{on:{change:e.updateReminders},model:{value:e.daily,callback:function(t){e.daily=t},expression:"daily"}},[e._v(e._s(e.lang("daily reminder")))])],1),e._v(" "),t("div",{staticClass:"setting-box"},[t("el-checkbox",{on:{change:e.updateReminders},model:{value:e.weekly,callback:function(t){e.weekly=t},expression:"weekly"}},[e._v(e._s(e.lang("weekly reminder")))])],1)])}),[],!1,null,null,null).exports;function L(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}function G(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?L(Object(n),!0).forEach((function(t){(0,s.c)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):L(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const I={mixins:[a.c],created:function(){this.fetchApiKey()},data:function(){return{config:window.config,api_key:"",success:!1}},computed:G({},(0,i.ys)({loading:function(e){return e.loading}})),methods:G(G({},(0,i.sR)(["SET_LOADING"])),{},{fetchApiKey:function(){var e=this;this.SET_LOADING(!0),(0,r.default)("".concat(config.api,"/api-key")).then((function(t){e.api_key=t.data,e.SET_LOADING(!1)}))},generateApiKey:function(){var e=this;this.SET_LOADING(!0),r.default.patch("".concat(config.api,"/settings/api-key"),{}).then((function(t){e.api_key=t.data,e.SET_LOADING(!1)}),(function(e){alert(e.message)}))}})};const M=(0,d.c)(I,(function(){var e=this,t=e._self._c;return e.loading?e._e():t("div",{staticClass:"settings-box element-ui-checkbox no-select"},["demo"===e.config.env?t("div",{staticClass:"login-error"},[t("span",[e._v("Data cannot be changed in the demo")])]):e._e(),e._v(" "),t("form",{staticClass:"settings-form",on:{submit:function(t){return t.preventDefault(),e.generateApiKey()}}},[t("span",{staticClass:"update-check"},[e._v("API-Key")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.api_key,expression:"api_key"}],attrs:{type:"text",readonly:""},domProps:{value:e.api_key},on:{input:function(t){t.target.composing||(e.api_key=t.target.value)}}}),e._v(" "),t("input",{attrs:{type:"submit"},domProps:{value:"Generate new key"}})])])}),[],!1,null,null,null).exports;function R(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}function U(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?R(Object(n),!0).forEach((function(t){(0,s.c)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):R(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const F={mixins:[a.c],created:function(){this.SET_LOADING(!0),this.setPageTitle(this.lang("settings")),this.fetchUserData()},components:{User:f,Options:_,Backup:y,Misc:P,Refresh:A,Reminders:N,Api:M},data:function(){return{activeTab:"",user:{}}},computed:U({},(0,i.ys)({loading:function(e){return e.loading}})),methods:U(U(U({},(0,i.ae)(["setPageTitle"])),(0,i.sR)(["SET_LOADING"])),{},{changeActiveTab:function(e){this.activeTab=e},fetchUserData:function(){var e=this;(0,r.default)("".concat(config.api,"/settings")).then((function(t){e.user=t.data,e.activeTab=!0===e.user.is_admin?"misc":"options",e.SET_LOADING(!1)}))}})};const K=(0,d.c)(F,(function(){var e=this,t=e._self._c;return t("main",[t("div",{staticClass:"wrap-content"},[t("div",{staticClass:"navigation-tab no-select"},[e.user.is_admin?t("span",{class:{active:"misc"==e.activeTab},on:{click:function(t){return e.changeActiveTab("misc")}}},[e._v(e._s(e.lang("tab misc")))]):e._e(),e._v(" "),t("span",{class:{active:"options"==e.activeTab},on:{click:function(t){return e.changeActiveTab("options")}}},[e._v(e._s(e.lang("tab options")))]),e._v(" "),t("span",{class:{active:"user"==e.activeTab},on:{click:function(t){return e.changeActiveTab("user")}}},[e._v(e._s(e.lang("tab user")))]),e._v(" "),e.user.is_admin?t("span",{class:{active:"backup"==e.activeTab},on:{click:function(t){return e.changeActiveTab("backup")}}},[e._v(e._s(e.lang("tab backup")))]):e._e(),e._v(" "),e.user.is_admin?t("span",{class:{active:"refresh"==e.activeTab},on:{click:function(t){return e.changeActiveTab("refresh")}}},[e._v(e._s(e.lang("refresh")))]):e._e(),e._v(" "),e.user.is_admin?t("span",{class:{active:"reminders"==e.activeTab},on:{click:function(t){return e.changeActiveTab("reminders")}}},[e._v(e._s(e.lang("reminders")))]):e._e(),e._v(" "),t("span",{class:{active:"api_key"==e.activeTab},on:{click:function(t){return e.changeActiveTab("api_key")}}},[e._v("API")])]),e._v(" "),e.loading?t("span",{staticClass:"loader fullsize-loader"},[t("i")]):e._e(),e._v(" "),"user"==e.activeTab?t("User",{attrs:{user:e.user}}):e._e(),e._v(" "),"options"==e.activeTab?t("Options",{attrs:{user:e.user}}):e._e(),e._v(" "),"backup"==e.activeTab?t("Backup"):e._e(),e._v(" "),"misc"==e.activeTab?t("Misc"):e._e(),e._v(" "),"refresh"==e.activeTab?t("Refresh",{attrs:{"initial-refresh":e.user.refresh}}):e._e(),e._v(" "),"reminders"==e.activeTab?t("Reminders",{attrs:{user:e.user}}):e._e(),e._v(" "),"api_key"==e.activeTab?t("Api"):e._e()],1)])}),[],!1,null,null,null).exports}}]);